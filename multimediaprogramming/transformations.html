<!doctype html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Multimedia Programming - Transformations</title>

        <link type="text/css"  rel="stylesheet" href="css/jquery-ui-1.8.14.custom.css"/>	
        <link type="text/css" rel=StyleSheet href="css/module.css">	
        <link type="text/css" rel=StyleSheet href="css/ide.css">
        <!--
        JQuery Stuff
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
        -->
        <script type="text/javascript" src="js/jquery-1.6.2.min.js"></script>
        <script type="text/javascript" src="js/jquery-ui-1.8.14.custom.min.js"></script>
        <script type="text/javascript" src="js/module.js"></script>
        <!-- Syntax Highlighter
        <script type="text/javascript" src="js/hightlighter/shCore.js"></script> 
        <script type="text/javascript" src="js/hightlighter/shProcessing.js"></script> 
        <link type="text/css" rel="stylesheet" href="css/highlighter/shCoreDefault.css"/>
        -->
        <!-- Code Mirror -->
        <link rel="stylesheet" href="css/cm/processingide.css">
        <script type="text/javascript" src="js/cm/codemirror.js"></script>
        <script type="text/javascript" src="js/cm/clike.js"></script>
        <link rel="stylesheet" href="css/cm/processing.css">
        <!-- Processing.js -->
        <script type="text/javascript" src="js/processing-1.3.0.min.js"></script>

        <style>.CodeMirror {border: 2px inset #dee;}</style>


    </head>
    <body>

        <div id="wrapper">

            <div id="container">
                <div id="tabs">
                    <ul>
                        <li><a href="index.html">Back</a></li>
                        <li><a href="#tabs-1">Goals</a></li>
                        <li><a href="#tabs-2">Drawing</a></li>
                        <li><a href="#tabs-3">Translation</a></li>
                        <li><a href="#tabs-4">Rotation and Scale</a></li>
                        <li><a href="#tabs-5">Push and Pop Matrix</a></li>
                        <li><a href="#tabs-6">Example</a></li>
                    </ul>
                    <div id="tabs-1" class="tab">

                        <h1>Goals</h1>
                        <ul>
                            <li>Drawing Directly
                                <ul>
                                    <li>Drawbacks</li>
                                    <li>Confusion</li>
                                </ul>
                            </li>
                            <li>A Better Way
                                <ul>
                                    <li>Translation</li>
                                    <li>Rotation</li>
                                    <li>Scale</li>
                                </ul>
                            </li>
                        </ul>
                        <div class="rule"></div>
                        <h1>Resources</h1>
                        <p>
                            <a href="http://processing.org/learning/transform2d/">http://processing.org/learning/transform2d/</a><br />
                            <a href="http://processing.org/learning/basics/translate.html">http://processing.org/learning/basics/translate.html</a><br />
                            <a href="http://processing.org/learning/basics/scale.html">http://processing.org/learning/basics/scale.html</a><br />
                            <a href="http://processing.org/learning/basics/rotate.html">http://processing.org/learning/basics/rotate.html</a><br />
                            <a href="http://processing.org/learning/basics/triangleflower.html">http://processing.org/learning/basics/triangleflower.html</a><br />
                        </p>
                        <div class="rule"></div>
                        <div class="quote">
                            "The universe is transformation; our life is what our thoughts make it." ~ Marcus Aurelius
                        </div>

                    </div>
                    <div id="tabs-2" class="tab">

                        <h1>Drawing Directly</h1>

                        <img src="img/transformations/directRect1.png"></img>

                        <p>
                            We can always draw our shapes where we want them to appear on the screen, and for the most part there's nothing
                            wrong with that. Here's an example of a rectangle drawn with it's top left corner at (40, 200), with a width and height
                            of 40 pixels. Now how would we go about rotating or scaling this rectangle? Let's take a look.
                        </p>

                        <div class="rule"></div>

                         <img src="img/transformations/directRect2.png"></img>

                        <p>
                            Notice that our rectangle has been rotated by 45 degrees, however it's entire location has been rotated as well.
                            This is because when the rotate( angle ) method is used in processing, it doesn't rotate the objects, it rotates the whole
                            screen. So our rectangle drawn at (40, 200) has been moved due to the rotation of the screen. Let's take a look at
                            what this screen rotation looks like.
                        </p>

                        <div class="rule"></div>

                        <img src="img/transformations/directRect3.png"></img>

                        <p>
                            Here we've rotated the grid as well as the square so it's clear to see how the square ended up where it did inside the window.
                            Notice that relative to the grid, which is now also rotated, the square is in fact drawn with it's top left corner at
                            (40, 200). There is an issue with drawing our shapes this way though, since we don't know where the rectangle actually is
                            with respect to the screen, we don't have control over our rectangles location, and more advanced topics like collision detection
                            will become extremely messy with our shapes spinning all over the screen like this.
                        </p>

                        <div class="rule"></div>

                        <div class="important">We can draw our shapes directly at a specific location in processing, but it raises some issues if we
                        want to rotate or scale the shape.</div>
                        <div class="important">Shapes drawn directly that have a rotation or scale applied are difficult to track and may end up
                        in undesirable locations (usually outside the window).</div>

                    </div>
                    <div id="tabs-3" class="tab">

                       <h1>Translation</h1>

                        <img src="img/transformations/translate1.png"></img>

                        <p>
                            Let's say we wanted to have our shape in the same location, but instead of drawing our shape there we first moved the paper
                            to the location (40, 200), so that when we drew our shape at the location (0, 0) it would appear at (40, 200). The following
                            commands do exactly that. The translate( x, y ) method will move the entire screen and everything drawn after it. Let's take
                            a closer look at how the screen moves.
                        </p>

                        <div class="rule"></div>

                         <img src="img/transformations/translate2.png"></img>

                        <p>
                            See how the grid has actually moved in this image. The grid represents our drawing area in processing, which means the top
                            left corner of the grid actually represents (0, 0) for anything drawn on it. So when we move the screen by translating, we
                            actually move the processing drawing area and everything drawn after it will be relative to the drawing area's new location.
                        </p>

                        <div class="rule"></div>

                        <img src="img/transformations/translate3.png"></img>

                        <p>
                            This example shows we can actually draw some items in negative numbers. Remember that we always draw our rectangles from the
                            top left corner and with a width and height, so by making the top left corner negative coordinates half the width and the height
                            of the rectangle, we're able to place the rectangles center at (0, 0). If we always know that my rectangle will be centered at
                            the location we are translating to, then we can be assured that we know where it is at all times.
                        </p>

                        <div class="rule"></div>

                        <div class="important">Translating moves the processing drawing area to a certain location. The new origin (0, 0) now represents
                        the location that was translated to.</div>
                        <div class="important">Always translate before drawing  shapes so their locations are known.</div>
                        <div class="important">Always draw shapes around the origin of the processing drawing area (0, 0) and use
                        translate to move the location of each shape.</div>


                    </div>

                    <div id="tabs-4" class="tab">

                       <h1>Rotation and Scale</h1>

                        <img src="img/transformations/rotate1.png"></img>

                        <p>
                            Let's take a look at the example where we drew our rectangle around the point (0, 0) instead of using (0, 0) as the top
                            left corner of the rectangle. Why would we want our rectangle centered around (0, 0) and what's so special about it?
                            Well imagine we wanted to rotate our rectangle. If the rectangle has it's top left corner at (0, 0) the rectangle will
                            swing around this point. But if our rectangle is centered over (0, 0) and we rotate the screen, we will spin our rectangle
                            on the spot and it's center will remain the same. Take a look.
                        </p>

                        <div class="rule"></div>

                         <img src="img/transformations/rotate2.png"></img>

                        <p>
                            So the center of our rectangle has not changed, however it's been rotated. The blue rectangle represents our rectangle
                            that was drawn with it's top left corner at (0, 0). Notice how unlike the red rectangle which is centered at (0, 0) the
                            blue rectangle tends to swing around it's top left corner. That is because when the rotate method is called the screen in
                            processing actually rotates around this (0, 0) point. Let's take a look at how things scale.
                        </p>

                        <div class="rule"></div>

                        <img src="img/transformations/rotate3.png"></img>

                        <p>
                            Here we see that our shape has been scaled by a factor of 2. This means that the coordinates in the processing drawing area
                            are also scaled by a factor of 2. So if we decided to move our rectangle on this grid, each move would actually be double
                            what we specified. For example, a rectangle drawn at (40, 40) is shown in blue. The blue rectangle is clearly no where near
                            the point (40, 40) if we're looking at the original drawing area with the top left corner at (0, 0). This is where translation,
                            rotation and scale can be a little tricky.
                        </p>

                        <div class="rule"></div>

                        <div class="important">Rotation and Scaling will effect where shapes are drawn if they are not centered around (0, 0)
                        this is because the whole drawing area is rotated and scaled, which means the coordinates are too.</div>

                    </div>

                    <div id="tabs-5" class="tab">

                       <h1>Push and Pop Matrix</h1>

                        <img src="img/transformations/pushPop.png"></img>

                        <p>
                            There is a problem with translating to a location to draw each shape, how do we get back to (0, 0) so we can translate
                            to another location to draw a different shape. The answer is: we call the pushMatrix() method to save all of our translation,
                            rotation and scale information, and when we are finished we call popMatrix() to return us back to (0, 0) with no rotation
                            and no scale. Take a look at the image and try to figure out how the same call to the rect method is drawing the rectangle
                            in two different locations.
                        </p>

                        <div class="rule"></div>
                        
                        <p>
                            The following example should give you some practice with the push and pop matrix methods. Try commenting out some of the
                            calls to push and pop matrix and see what happens.
                        </p>

                        <form><textarea class="processingide" style="height:300px">
void setup() {
  size(400, 400);
  background(255);

  pushMatrix();
  translate(200, 200);   //move to the center of the window
  ellipse(0, 0, 54, 54);  
  pushMatrix();          //saves translation to the center
  translate(-100, -100); //move up and to the left
  rotate(-PI/4);         //rotate 45 degrees counter-clockwise
  rect(-20, -20, 40, 40);
  popMatrix();           //take us back to the center of the window
  pushMatrix();          //saves translation to the center
  translate(100, -100);  //move up and to the right
  rotate(PI/4);          //rotate 45 degrees clockwise
  rect(-20, -20, 40, 40);
  popMatrix();           //take us back to the center of the window
  rect(-20, -20, 40, 40);
  popMatrix();           //take us back to 0, 0
}
                            </textarea></form>
                        
                        <div class="rule"></div>


                        <div class="important">Each time you translate, rotate or scale, it's referred to as a transformation.</div>
                        <div class="important">Always call pushMatrix() before any translation, rotation or scale, draw your shape, then call popMatrix()
                        to return to the previous transformation.</div>
                        <div class="important">We can call pushMatrix() several times, but each call to pushMatrix() must have a matching
                            call to popMatrix();</div>

                    </div>
                    
                    <div id="tabs-6" class="tab">

                        <form><textarea class="processingide" style="height:580px">
void setup() {
  size(400, 400);
}

void draw() {
  background(255);
  stroke(0, 128);
  strokeWeight(2);
  
  pushMatrix();
  translate( mouseX, mouseY );
  
  pushMatrix();
  rotate( (float) mouseX / 400 * PI * 2 );
  scale( (float) mouseY / 100 );
  fill(255, 0, 0, 128);
  rect(-20, -20, 40, 40);
  popMatrix();
  
  pushMatrix();
  translate( 100, 0 );
  rotate( (float) mouseX / -400 * PI * 2 );
  scale( (float) mouseY / 100 );
  fill(0, 255, 0, 128);
  rect(-20, -20, 40, 40);
  popMatrix();
  
  pushMatrix();
  translate( -100, 0 );
  rotate( (float) mouseX / -400 * PI * 2 );
  scale( (float) mouseY / 100 );
  fill(0, 0, 255, 128);
  rect(-20, -20, 40, 40);
  popMatrix();
  
  popMatrix();
}
                            </textarea></form>




                    </div>


                </div>

            </div>
        </div>


    </body>
</html>
